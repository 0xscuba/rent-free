(this["webpackJsonprent-free"]=this["webpackJsonprent-free"]||[]).push([[0],{118:function(n,e){},134:function(n,e){},135:function(n,e){},155:function(n,e){},157:function(n,e,t){"use strict";t.r(e);var r=t(9),c=t.n(r),a=t(78),o=t.n(a),i=(t(92),t(1)),s=t.n(i),l=t(3),u=t(16),d=t(19),b=t(4),f=t(86),p=t(11),j=Object(r.createContext)(new Map);function x(n){var e=Object(r.useState)(new Map),t=Object(u.a)(e,2),c=t[0],a=t[1];return Object(r.useEffect)((function(){(new f.a).resolve().then((function(n){var e=new Map;n.getList().forEach((function(n){e.set(n.address,n)})),a(e)}))}),[]),Object(p.jsx)(j.Provider,{value:c,children:n.children})}var h=Object(r.createContext)(null);function O(){var n=Object(r.useContext)(h);if(!n)throw new Error("WalletContext not set");return n}function m(n){var e=Object(r.useState)(null),t=Object(u.a)(e,2),c=t[0],a=t[1];function o(){return(o=Object(l.a)(s.a.mark((function n(){var e;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null===(e=window.solana)||void 0===e?void 0:e.isPhantom){n.next=2;break}return n.abrupt("return");case 2:window.solana.connect(),window.solana.on("connect",(function(){a(window.solana.publicKey.toString())}));case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function i(){return(i=Object(l.a)(s.a.mark((function n(e){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,window.solana.signTransaction(e);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var d={walletAddress:c,connectWallet:function(){return o.apply(this,arguments)},signTransaction:function(n){return i.apply(this,arguments)}};return Object(p.jsx)(h.Provider,{value:d,children:n.children})}var v=t(45);function g(n,e,t){return w.apply(this,arguments)}function w(){return(w=Object(l.a)(s.a.mark((function n(e,t,r){var c,a,o,i;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.getParsedTokenAccountsByOwner(t,{programId:v.a});case 2:return c=n.sent,a=c.value,o=a.map((function(n){var e,t=n.pubkey,c=n.account.data.parsed.info.mint;return{accountAddress:t,mintAddress:c,amount:n.account.data.parsed.info.tokenAmount,name:null===(e=r.get(c))||void 0===e?void 0:e.name}})),(i=o.filter((function(n){return"0"===n.amount.amount}))).sort((function(n,e){return n.name?e.name?n.name.localeCompare(e.name):-1:1})),n.abrupt("return",i);case 8:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function y(n,e){return v.b.createCloseAccountInstruction(v.a,e,n,n,[])}var k,A,C,T,M,P,S,z,E,L,I,B,R,U=t(20),W=U.a.div(k||(k=Object(d.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: #030403;\n  font-size: 16px;\n  margin-top: 25px;\n"]))),J=U.a.div(A||(A=Object(d.a)(["\n  display: flex;\n  flex-direction: column;\n"]))),_=U.a.span(C||(C=Object(d.a)(["\n  font-family: Monospace;\n\n  a, a:visited, a:hover {\n    color: inherit;\n    text-decoration: none;\n  }\n\n  a:hover {\n    text-decoration: underline;\n  }\n"]))),F=U.a.div(T||(T=Object(d.a)(["\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 32px;\n\n"]))),G=U.a.span(M||(M=Object(d.a)(["\n  display: block;\n  font-size: 24px;\n  font-weight: bold;\n  margin-bottom: 16px;\n"]))),K=U.a.div(P||(P=Object(d.a)(["\n  display: flex;\n  flex-direction: column;\n"]))),N=U.a.div(S||(S=Object(d.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  min-width: 520px;\n  margin-bottom: 20px;\n"]))),Z=U.a.div(z||(z=Object(d.a)(["\n  display: flex;\n  flex-direction: column;\n"]))),q=U.a.span(E||(E=Object(d.a)(["\n  display: block;\n  font-weight: bold;\n  font-family: Monospace;\n  margin-bottom: 4px;\n"]))),D=U.a.span(L||(L=Object(d.a)(["\n  display: block;\n  font-family: Monospace;\n\n  a, a:visited, a:hover {\n    color: inherit;\n    text-decoration: none;\n  }\n\n  a:hover {\n    text-decoration: underline;\n  }\n"]))),H=U.a.button(I||(I=Object(d.a)(["\n  background-color: transparent;\n  color: #86726c;\n  border: 4px solid #86726c;\n  border-radius: 12px;\n  padding: 4px 8px;\n  display: inline-block;\n  text-align: center;\n  text-decoration: none;\n  font-size: 16px;\n  font-weight: bold;\n  &:hover {\n    background-color: rgba(134, 114, 108, 0.9);\n    color: #f6f6f2;\n  }\n"]))),Q=U.a.div(B||(B=Object(d.a)(["\n  display: flex;\n"]))),V=U.a.button(R||(R=Object(d.a)(["\n  background-color: transparent;\n  color: #606768;\n  border: 4px solid #606768;\n  border-radius: 12px;\n  padding: 15px 32px;\n  display: inline-block;\n  text-align: center;\n  text-decoration: none;\n  font-size: 18px;\n  font-weight: bold;\n  &:hover {\n    background-color: rgba(96, 103, 104, 0.8);\n    color: #f6f6f2;\n  }\n"])));function X(n){var e=n.emptyAccounts,t=n.walletAddress,r=n.connection,c=n.signTransaction,a=n.triggerUpdate,o=n.setTriggerUpdate,i=n.isLoading,u=n.setIsLoading;function d(){return(d=Object(l.a)(s.a.mark((function n(e){var i,l,d,f,p,j;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=new b.c(t),l=new b.c(e.accountAddress),n.next=4,r.getRecentBlockhash();case 4:return d=n.sent.blockhash,(f=new b.f({recentBlockhash:d,feePayer:i})).add(y(i,l)),n.prev=7,n.next=10,c(f);case 10:return p=n.sent,u(!0),n.next=14,r.sendRawTransaction(p.serialize());case 14:return j=n.sent,console.log(j),n.next=18,new Promise((function(n){return setTimeout(n,4e3)}));case 18:o(a+1),n.next=25;break;case 21:n.prev=21,n.t0=n.catch(7),console.error(n.t0),u(!1);case 25:case"end":return n.stop()}}),n,null,[[7,21]])})))).apply(this,arguments)}var f=0===e.length?Object(p.jsx)(G,{children:"No empty accounts"}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(G,{children:"Zero balance token accounts"}),Object(p.jsx)(K,{children:e.map((function(n){var e;return Object(p.jsxs)(N,{children:[Object(p.jsxs)(Z,{children:[Object(p.jsx)(q,{children:null!==(e=n.name)&&void 0!==e?e:"unknown"}),Object(p.jsx)(D,{children:Object(p.jsx)("a",{href:"https://solscan.io/token/".concat(n.mintAddress),target:"_blank",rel:"noreferrer",children:n.mintAddress})})]}),Object(p.jsx)(H,{onClick:function(){return function(n){return d.apply(this,arguments)}(n)},disabled:i,children:"Close"})]},n.mintAddress)}))})]});return Object(p.jsx)(F,{children:f})}function Y(){var n=O().connectWallet;return Object(p.jsx)(Q,{children:Object(p.jsx)(V,{onClick:n,children:"Connect to Phantom"})})}var $=function(){var n=O(),e=n.walletAddress,t=n.signTransaction,c=function(){var n=Object(r.useContext)(j);if(!n)throw new Error("TokenRegistryContext not set");return n}(),a=Object(r.useState)([]),o=Object(u.a)(a,2),i=o[0],d=o[1],f=Object(r.useMemo)((function(){return new b.a("https://api.mainnet-beta.solana.com","singleGossip")}),[]),x=Object(r.useState)(0),h=Object(u.a)(x,2),m=h[0],v=h[1],w=Object(r.useState)(!0),y=Object(u.a)(w,2),k=y[0],A=y[1];Object(r.useEffect)((function(){Object(l.a)(s.a.mark((function n(){var t,r;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e&&c.size>0)){n.next=7;break}return t=new b.c(e),n.next=4,g(f,t,c);case 4:r=n.sent,d(r),A(!1);case 7:case"end":return n.stop()}}),n)})))(),console.log("Refresh:",m)}),[f,e,c,m]);var C=Object(p.jsx)(F,{children:Object(p.jsx)(G,{children:"Loading..."})}),T=e?Object(p.jsxs)(J,{children:[Object(p.jsxs)(F,{children:[Object(p.jsx)(G,{children:"Connected to"}),Object(p.jsx)(K,{children:Object(p.jsx)(_,{children:Object(p.jsx)("a",{href:"https://solscan.io/account/".concat(e),target:"_blank",rel:"noreferrer",children:e})})})]}),k?C:Object(p.jsx)(X,{emptyAccounts:i,walletAddress:e,connection:f,signTransaction:t,triggerUpdate:m,setTriggerUpdate:v,isLoading:k,setIsLoading:A})]}):Object(p.jsx)(Y,{});return Object(p.jsx)(W,{children:T})};var nn=function(){return Object(p.jsx)(m,{children:Object(p.jsx)(x,{children:Object(p.jsx)($,{})})})};o.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(nn,{})}),document.getElementById("root"))},92:function(n,e,t){},93:function(n,e){},97:function(n,e){}},[[157,1,2]]]);
//# sourceMappingURL=main.c0eac620.chunk.js.map